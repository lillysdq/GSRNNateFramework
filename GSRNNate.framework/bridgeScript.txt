!function(e,a){"object"==typeof exports&&"undefined"!=typeof module?a():"function"==typeof define&&define.amd?define(a):a()}(0,function(){"use strict";var e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")},n=function(){function e(e,a){for(var n=0;n<a.length;n++){var t=a[n];t.enumerable=t.enumerable||!1,t.configurable=!0,"value"in t&&(t.writable=!0),Object.defineProperty(e,t.key,t)}}return function(a,n,t){return n&&e(a.prototype,n),t&&e(a,t),a}}(),t={PROTOCOL:"goodsogood"},o={eventMap:[{type:1,describe:"关闭当前页面",className:"ExportClass",action:"closePage"},{type:2,describe:"获取位置",className:"ExportLocation",action:"getLocation",hasCallback:!0},{type:4,describe:"获取用户信息",className:"ExportGetUserInfo",action:"getUserInfo",hasCallback:!0},{type:5,describe:"选择图片",className:"ExportClass",action:"selectPic",hasCallback:!0},{type:6,describe:"充值",className:"ExportRecharge",action:"recharge",hasCallback:!0},{type:7,describe:"设置是否显示加载动画--\x3e显示",className:"ExportLoad",action:"show"},{type:8,describe:"设置是否显示加载动画--\x3e隐藏",className:"ExportLoad",action:"hide"},{type:9,describe:"调用支付接口",className:"ExportPay",action:"pay",hasCallback:!0},{type:10,describe:"进入RN界面",className:"ExportPush",action:"enterRnPage"},{type:11,describe:"打开蓝牙",action:"openBluetooth"},{type:12,describe:"打开WIFI界面",action:"openWIFI"},{type:13,describe:"打开扫一扫界面",action:"scan",hasCallback:!0},{type:14,describe:"打开原生设置定位权限",action:"setLocation",hasCallback:!0},{type:15,describe:"调取原生分享界面",action:"openShare",hasCallback:!0},{type:16,describe:"打开我的积分界面",action:"openIntegralView"},{type:17,describe:"打开指定URL",action:"openSpecifyUrl"},{type:18,describe:"获得APP相关信息",action:"getAppInfo",hasCallback:!0},{type:19,describe:"打开APP指定页面",action:"openNativePage",hasCallback:!0},{type:20,describe:"拉取模块增加出参-随机字符串",action:"doSign",hasCallback:!0},{type:21,describe:"调取支付(包含各种支付方式)",action:"payWithPayway",hasCallback:!0},{type:22,describe:"移动端发送通知给客户端",action:"notification",hasCallback:!0}],resultIframe:null,sendMessageIframe:null,sendMessageQueue:[]},s=function(){function s(){a(this,s),this.init()}return n(s,[{key:"init",value:function(){s.createQueueReadyIframe(),s.bindEven(this)}}],[{key:"createQueueReadyIframe",value:function(){o.sendMessageIframe=window.document.createElement("iframe"),o.sendMessageIframe.id="__GoodSoGood_SendMessageframe",o.sendMessageIframe.style.display="none",window.document.documentElement.appendChild(o.sendMessageIframe)}},{key:"sendMessage",value:function(e){var a=o.sendMessageIframe,n=o.sendMessageQueue,c=s.getUuid();a&&n[0]&&(n[0].typeId=c,o.sendMessageIframe.src=t.PROTOCOL+"://hostsdk?value="+encodeURIComponent(JSON.stringify(n[0])),window.sendMessageCallback=function(a){a=JSON.parse(a),a.typeId===c&&e(a||"")},n.shift())}},{key:"bindEven",value:function(a){o.eventMap.map(function(n){s.addEventToJSBridge(a,n.action,function(a,t){var o={type:n.type};"function"==typeof a?o.callback=a:"object"!==(void 0===a?"undefined":e(a))&&"string"!=typeof a||(o.params=a,n.hasCallback&&"function"==typeof t&&(o.callback=t)),s.addQueueAndSendEvent(o)})})}},{key:"addEventToJSBridge",value:function(e,a,n){e[a]=n}},{key:"addQueueAndSendEvent",value:function(e){var a=e.type,n=e.params,t=e.callback,c={type:a},i=null;t&&(i=t),n&&(c.params=n),o.sendMessageQueue.push(c),s.sendMessage(i||"")}},{key:"getUuid",value:function(){return(+Date.now()).toString()}}]),s}();Object.defineProperty(window,"GoodSoGoodJSBridge",{value:s,writable:!1,configurable:!1})});
